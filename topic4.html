<!DOCTYPE html>
<html lang="en">
<head>
    <title>Topic 4</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="styles/main.css">
</head>
    <!--menu slide-->
<div id="nav-placeholder"></div>
<body>
    <h1>Topic 04</h1>
    <h3>AJAX requesting a JSON file</h3>
<div>
        <h4>Why use AJAX?</h4>
<ul class="why">
    <li>Update a web page without reloading the page</li>
    <li>Request/Receive data from server after the page loaded</li>
    <li>Send data to a server in the background</li>
</ul>
</div>
<h4>AJAX specific syntax: </h4>
<ul>
    <li>
        <a style="color: rgb(4, 117, 42)", href="https://www.w3schools.com/xml/ajax_intro.asp" target="_blank">AJAX introduction</a>
    </li>
    <li>
        <a style="color: rgb(4, 117, 42)", href="https://www.w3schools.com/xml/ajax_xmlhttprequest_create.asp" target="_blank">XMLHttpRequest Object</a>
    </li>
    <li>
        <a style="color: rgb(4, 117, 42)", href="https://www.w3schools.com/xml/ajax_xmlhttprequest_send.asp" target="_blank">Request</a>
    </li>
    <li>
        <a style="color: rgb(4, 117, 42)", href="https://www.w3schools.com/xml/ajax_xmlhttprequest_response.asp" target="_blank">Response</a>
    </li>
</ul>

    <section class = "updated">
        <h3> Example </h3>
        <pre>
function requestDisplay() {
var xhttp = new XMLHttpRequest(); 
var results = document.
getElementById('displayParsed');
xhttp.onreadystatechange = 
function () {
if (this.readyState == 4 && 
this.status == 200) {
var data = 
JSON.parse(xhttp.responseText);
for (i = 0; i < 25; i++) {
results.innerHTML+="font-family: "
+ data.items[i].family + ", " +
"category: " + 
data.items[i].category + ", " + 
"version: " + data.items[i]
.version + ", " + 
"last modified: " + 
 data.items[i].lastModified;
console.log(data);
}
}
}
xhttp.open("GET", "url here", 
true);
xhttp.send();
};
</pre>
<hr>
   <h4>The code steps through this process:</h4>
    <ol> 
        <li>The button is pressed (creating an event).</li>
        <li>XMLHttp Request Object is created by JavaScript.</li>
        <li>The object sends request to google APIs</li>
        <li>google APIs process and send back response.</li>
        <li>Parse the object from JSON into a JavaScript using JSON.parse</li>
        <li>25 items from the google API are displayed </li>
        <li>LOOK in console log for object detail >>>>>>> </li>
    </ol>
            <br> <button type="button" class="button" onclick="requestDisplay()">launch Request / Display</button><br><br><br>
            <div id="displayParsed"></div><br>
    </section>

    <div style="text-align:center;border:1px solid rgb(2, 66, 7)">
        <h3> Just for fun.  Let's pull a Star Wars api: </h3>
        <a href="topic4.html"> </a><img src="images/luke_sw.png" alt="Luke Skywalker" width="200" height="200"></a>
         <button type="button" class="button" onclick="requestDisplaySW()"> Reveal character </button><br><br>
        <div id="displayParsedSW"></div><br>
    </div>

    <div style="text-align:center;border:1px solid rgb(2, 66, 7)">
        <h3> Now. Let's pull a Harry Potter api: </h3>
         <button type="button" class="button" onclick="requestDisplayHP()"> Reveal character </button><br><br>
        <div id="displayParsedHP"></div><br>
    </div>

    
</body>
<!--Javascripts-->
<script src="https://code.jquery.com/jquery-1.10.2.js"></script>
<script>
$.get("navigation.html", function(data){
    $("#nav-placeholder").replaceWith(data);
});
</script>
<script src="scripts/topic4.js"></script>
<script src="scripts/main.js"></script>
</html>